class GraphMatrix:
    def __init__(self, vertices):
        self.vertices = vertices
        self.size = len(vertices)
        self.adj_matrix = [[0]*self.size for _ in range(self.size)]

    def add_edge(self, u, v):
        if u not in self.vertices or v not in self.vertices:
            print("Error: vertex not found")
            return
        i = self.vertices.index(u)
        j = self.vertices.index(v)
        self.adj_matrix[i][j] = 1
        self.adj_matrix[j][i] = 1

    def dfs(self, start, visited=None):
        if start not in self.vertices:
            print("Error: Starting vertex not found")
            return
        if visited is None:
            visited = set()
        print(start, end=' ')
        visited.add(start)
        start_index = self.vertices.index(start)
        for i in range(self.size):
            if self.adj_matrix[start_index][i] == 1 and self.vertices[i] not in visited:
                self.dfs(self.vertices[i], visited)


class GraphList:
    def __init__(self):
        self.adj_list = {}

    def add_edge(self, u, v):
        if u not in self.adj_list:
            self.adj_list[u] = []
        if v not in self.adj_list:
            self.adj_list[v] = []
        self.adj_list[u].append(v)
        self.adj_list[v].append(u)

    def bfs(self, start):
        if start not in self.adj_list:
            print("Error: Starting vertex not found")
            return
        visited = set()
        queue = [start]
        visited.add(start)
        while queue:
            node = queue.pop(0)
            print(node, end=' ')
            for neighbour in self.adj_list[node]:
                if neighbour not in visited:
                    visited.add(neighbour)
                    queue.append(neighbour)


# Main program
print("Graph Traversal (City Area Example)")
n = int(input("Enter number of locations: "))
vertices = []
for i in range(n):
    name = input(f"Enter location name ({i+1}): ").upper()
    vertices.append(name)

g_matrix = GraphMatrix(vertices)
g_list = GraphList()

e = int(input("Enter number of routes between locations: "))
for i in range(e):
    u, v = input("Enter route (e.g., A B): ").upper().split()
    g_matrix.add_edge(u, v)
    g_list.add_edge(u, v)

start = input("Enter starting location: ").upper()
print("\nDFS Traversal using Adjacency Matrix:")
g_matrix.dfs(start)
print("\nBFS Traversal using Adjacency List:")
g_list.bfs(start)
print()